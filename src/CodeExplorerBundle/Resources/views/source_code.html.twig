<div class="section source-code">
    <p>
        {{ 'help.show_code'|trans|raw }}
    </p>

    <button type="button" class="btn btn-default btn-lg btn-block" data-toggle="modal" data-target="#sourceCodeModal">
      <i class="fa fa-cogs"></i> {{ 'action.show_code'|trans }}
    </button>

    <div class="modal fade" id="sourceCodeModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                    <h4 class="modal-title"><i class="fa fa-code"></i> {{ 'title.source_code'|trans }}</h4>
                </div>

                <div class="modal-body">
                    {% if controller %}
                        <h3>{{ 'title.controller_code'|trans }}<small class="pull-right">source : {{ controller.file_path }}, class : {{ controller.class_name }}, method : {{ controller.method_name }}, line : {{ controller.starting_line }}</small></h3>
                        <pre><code class="php">{{ controller.source_code }}</code></pre>
                        <p><a  href="#edit-controller-doc" onclick="editCodeDoc('{{ controller.doc_url}}')">Edit doc</a>
                            <!-- for test a style="float:right"  href="#serialize-controller-doc-as-xml" onclick="$('#controller-doc-serialized').text($axel('#controller-doc').xml())">Serialize doc as xml</a-->
                            <span style="float:right"><a   href="#save-controller-doc-as-xml" onclick="saveCodeDoc('{{ controller.doc_file}}', $axel('#controller-doc').xml())">Save doc as xml</a> or <a href="#store-in-plaidoc" onclick="storeCodeDoc($axel('#controller-doc').xml(), '{{ controller.srcRelativePath}}', '{{ controller.class_name }}', '{{ controller.method_name }}', '{{ controller.starting_line }}', '{{ controller.ending_line }}')">Store in plaidoc</a></span>
                        </p>
                        <div id="controller-doc"></div>
                        <div id="controller-doc-serialized"><!-- div for test of xml generated by axel --></div>
                    {% else %}
                        <h3>{{ 'title.controller_code'|trans }}</h3>
                        <pre><code>{{ 'not_available'|trans }}</code></pre>
                    {% endif %}

                    <h3>{{ 'title.twig_template_code'|trans }}<small class="pull-right">{{ template.file_path|format_file(template.starting_line) }}</small></h3>
                    <pre><code class="twig">{{ template.source_code }}</code></pre>
                    <div id="twig-doc"></div>
                </div>
            </div>
        </div>
    </div>
</div>
